<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Motorista - Cargas Disponíveis</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f0f0f0; padding: 20px; }
    section { background: white; padding: 20px; border-radius: 8px; margin: 20px auto; max-width: 800px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    h2 { color: #2a5d9f; }
    .btn { background: #2a5d9f; color: white; padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; margin-top: 10px; display: inline-block; }
    label { font-weight: bold; display: block; margin-top: 15px; }
    input, textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; margin-top: 5px; }
  </style>
</head>
<body>
  <section>
    <h2>Cargas em Oferta</h2>
    <p>Clique abaixo para ver as cargas disponíveis:</p>
    <button class="btn" onclick="window.location.reload()">Atualizar Lista</button>
    <ul id="lista-cargas"></ul>
  </section>

  <section>
    <h2>Envio de Documentos</h2>
    <form action="https://formsubmit.co/programacao03@agilixlogistica.com.br" method="POST" enctype="multipart/form-data">
      <label>CNH do Motorista:</label><input type="file" name="cnh" required>
      <label>ANTT:</label><input type="file" name="antt" required>
      <label>CRLV do Cavalo/Truck:</label><input type="file" name="crlv_cavalo" required>
      <label>CRLV da Carreta:</label><input type="file" name="crlv_carreta" required>
      <label>Comprovante de Endereço:</label><input type="file" name="endereco" required>
      <label>Referências Pessoais:</label><textarea name="ref_pessoais" required></textarea>
      <label>Referências Comerciais:</label><textarea name="ref_comerciais" required></textarea>
      <label>Telefone do Motorista:</label><input type="text" name="telefone" required>
      <label>Observações:</label><textarea name="observacoes"></textarea>
      <button type="submit">Enviar Documentos</button>
    </form>
  </section>

  <section>
    <h2>Finalizar Viagem - Envio do Canhoto</h2>
    <form action="https://formsubmit.co/programacao03@agilixlogistica.com.br" method="POST" enctype="multipart/form-data">
      <label>Número do Frete:</label><input type="text" name="frete_id" required>
      <label>Foto do Canhoto:</label><input type="file" name="canhoto" accept="image/*" required>
      <button type="submit">Enviar Canhoto</button>
    </form>
  </section>

  <script>
   fetch("https://script.google.com/macros/s/AKfycbwyC2CHl4xjoEMJ12zrM2GSiTN8FEDe_Jl5aglbpZ9x-VcBNNxx-N8zBcfl7iNHJjrbgg/exec")
      .then(res => {
        if (!res.ok) throw new Error(`Erro HTTP: ${res.status}`);
        return res.json();
      })
      .then(cargas => {
        const lista = document.getElementById("lista-cargas");
        lista.innerHTML = "";
       cargas.forEach(carga => {
  const li = document.createElement("li");
  li.innerHTML = `
    <strong>${carga.origem} → ${carga.destino}</strong><br>
    Tipo: ${carga.tipo} | Veículo: ${carga.veiculo} | R$: ${carga.valor}<br>
    <a href="https://wa.me/${(carga.whatsapp || "").toString().replace(/\D/g, '')}?text=Tenho%20interesse%20na%20carga%20${carga.origem}%20para%20${carga.destino}" target="_blank" class="btn">Tenho Interesse</a>
    <hr>
  `;
  lista.appendChild(li);
});
      })
      .catch(error => {
        document.getElementById("lista-cargas").innerHTML = "<li>Erro ao carregar cargas disponíveis.</li>";
        console.error("Erro ao buscar dados:", error);
      });
  </script>
</body>
</html>
