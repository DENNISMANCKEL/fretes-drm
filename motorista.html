<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Cargas Dispon√≠veis - DRM</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #f7f7f7; }
    ul { list-style: none; padding: 0; }
    li { background: white; padding: 15px; margin-bottom: 10px; border-radius: 8px; box-shadow: 0 0 8px rgba(0,0,0,0.1); }
    .btn {
      background: #2a5d9f; color: white; padding: 8px 12px;
      border: none; border-radius: 5px; text-decoration: none;
      display: inline-block; margin-top: 8px; font-weight: bold;
    }
    .btn.secondary { background: #28a745; margin-left: 10px; }
  </style>
</head>
<body>
<h2>Cargas Dispon√≠veis</h2>
<ul id="lista-cargas">Carregando...</ul>

<script>
  const URL_SCRIPT = "https://script.google.com/macros/s/AKfycbwyC2CHl4xjoEMJ12zrM2GSiTN8FEDe_Jl5aglbpZ9x-VcBNNxx-N8zBcfl7iNHJjrbgg/exec";

  function formatarValor(valor) {
    const num = parseFloat(String(valor).replace(/[R$\s.]/g, "").replace(",", "."));
    if (isNaN(num)) return valor;
    return num.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
  }

  fetch(URL_SCRIPT)
    .then(res => res.json())
    .then(cargas => {
      const lista = document.getElementById("lista-cargas");
      lista.innerHTML = "";
      cargas.forEach(c => {
        const id = c.id || "sem_id";
        const origem = c.origem || "";
        const destino = c.destino || "";
        const tipo = c.tipo || "";
        const veiculo = c.veiculo || "";
        const peso = c.peso || "-";
        const rastreado = c.rastreado || "";
        const valor = formatarValor(c.valor || "");
        const whatsapp = String(c.whatsapp || "").replace(/\D/g, "");
        const msg = `Tenho interesse na carga ${origem} para ${destino} (ID: ${id})`;
        const li = document.createElement("li");
        <li.innerHTML = `
  <strong>ID:</strong> ${id}<br>
  <strong>${origem} ‚Üí ${destino}</strong><br>
  <strong>Ve√≠culo:</strong> ${veiculo} | <strong>Tipo:</strong> ${tipo}<br>
  <strong>Peso:</strong> ${peso} | <strong>Rastreado:</strong> ${rastreado} | <strong>Valor:</strong> <strong>${valor}</strong><br>
  <strong>üìù Observa√ß√£o:</strong> ${c.observacao || "-"}<br><br>
  <a class="btn" target="_blank" href="https://wa.me/55${whatsapp}?text=${encodeURIComponent(msg)}">Tenho Interesse</a>
  <a class="btn secondary" href="documentos.html?frete_id=${id}">üìé Enviar Documentos</a>
`;>
    });
</script>
</body>
</html>
